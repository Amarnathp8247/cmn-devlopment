<!-- src/app/transaction/transaction.component.html -->

<div class="wrapper">
  <!-- Page Content -->
  <div id="content">
    <div class="container">
      <h2>Transaction History</h2>

      <!-- Loading and Error Messages -->
      <div *ngIf="loading">Loading transactions...</div>
      <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

      <!-- Filter Section -->
      <div class="filter-section mb-4">
        <div class="form-row">
          <div class="form-group col-md-4">
            <label for="transactionType">Transaction Type</label>
            <select id="transactionType" class="form-control" [(ngModel)]="transactionType">
              <option value="">All</option>
              <option value="DEPOSIT">Deposit</option>
              <option value="STAKE-IN">Sake In</option>
              <option value="WITHDRAW">Withdraw</option>
              <option value="REVERCED-USER">Recieved User</option>
              <option value="REWARD">Rewards</option>
              <option value="REFERRAL-INCOME">Refferal Income</option>
              <option value="SYSTEM-REWARD">System Rewards</option>
              <option value="STAKING-REWARD">Staking Rewards</option>
              <option value="NETWORK-BONUS">Network Bonus</option>
              <option value="SWAP-CMN-TO-CUSD">Swap CMN to CMN</option>
              <option value="SWAP-CUSD-TO-CMN">Swap CUSD to CMN</option>
              <option value="INTERNAL-TRANSFER">Internal Transfer</option>
              <option value="GENERATION-REWARD">Generation Rewards</option>
              <option value="CONVERT-REWARD">Convert Rewards</option>
              <option value="BURN">Burn</option>
              
              <!-- Add more options as needed -->
            </select>
          </div>
          <div class="form-group col-md-4">
            <label for="status">Status</label>
            <select id="status" class="form-control" [(ngModel)]="status">
              <option value="">All</option>
              <option value="COMPLETED">Completed</option>
              <option value="PENDING">Pending</option>
              <option value="FAILED">Failed</option>
              <!-- Add more options as needed -->
            </select>
          </div>
          <div class="form-group col-md-4">
            <label for="startDate">Start Date</label>
            <input type="date" id="startDate" class="form-control" [(ngModel)]="startDate">
          </div>
          <div class="form-group col-md-4">
            <label for="endDate">End Date</label>
            <input type="date" id="endDate" class="form-control" [(ngModel)]="endDate">
          </div>
          <div class="form-group col-md-4 d-flex align-items-end">
            <button class="btn btn-primary" (click)="applyFilters()">Apply Filters</button>
          </div>
        </div>
      </div>

      <!-- Transactions Table -->
      <table  class="table-data mt-4">
        <thead>
          <tr>
            <th>S.no</th>
            <th>Transaction Type</th>
            <th>Credited Amount</th>
            <th>Debited Amount</th>
            <th>Current Balance</th>
            <th>Description</th>
            <th>Status</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let transaction of transactions; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ transaction.transactionType }}</td>
            <td>
              <span *ngIf="transaction.amount > 0">{{ transaction.amount ? transaction.amount : '-' }}</span>
            </td>
            <td>
              <span *ngIf="transaction.amount < 0">{{ transaction.amount ? transaction.amount : '-' }}</span>
            </td>
            <td>{{ transaction.currentBalance }}</td>
            <td>{{ transaction.description }}</td>
            <td>{{ transaction.status }}</td>
            <td>{{ transaction.createdAt | date: 'medium' }}</td>
          </tr>
        </tbody>
      </table>

      <div *ngIf="!loading && transactions.length === 0">No transactions available.</div>

      <!-- Paginator -->
      <mat-paginator class="pagination" [length]="totalTransactions" [pageSize]="10" [pageSizeOptions]="[5, 10, 25]" (page)="onPageChange($event)">
      </mat-paginator>
    </div>
  </div>
</div>
